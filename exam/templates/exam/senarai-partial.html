
        <div class="card-body">
            <h5 class="card-title">Senarai BCS
                
                <span class="pull-right">

        <button class="btn btn-outline-primary btn-sm rounded" hx-get=""
                hx-target="#body-content" hx-push-url="true"><i class="fas fa-plus"></i>Tambah</button>
                            <a id="excel" href=""
           class="btn btn-outline-success rounded btn-sm"><i class="fas fa-file-excel"></i>Export</a>
      </span></h5>
      <div class="card-subtitle mt-5">
      <input id="carian-filter" class="carian-filter form-control" type="search"
      name="carian" placeholder="Carian.." hx-get="." hx-trigger="keyup changed delay:500ms"
      hx-target="#table-item" hx-select="#table-item" hx-swap="outerHTML" hx-push-url="true" hx-indicator=".htmx-indicator"></input>
      </div>
            <div id="table-item" class="mt-5 table-responsive">
                <table class="table table-striped table-sm table-hover">
                    <thead>
                    <tr>
                        <th scope="col">Tarikh</th>
                        <th scope="col">No BCS</th>
                        <th scope="col">MRN</th>
                        <th scope="col">Nama</th>
                        <th scope="col">Wad</th>
                        <th scope="col">Exam</th>
                        <th scope="col" class="text-center">Merge</th>
                        <th scope="col"></th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for item in page_obj %}
                        <tr id="item-{{ item.id }}">
                            <td>{{ item.bcs.tarikh|date:'d/m/Y g:i A' }}</td>
                            <td>{{ item.nobcs }}</td>
                            <td>{% if item.bcs.mrn %}{{ item.bcs.mrn }}{% else %}{{ item.bcs.nric }} {% endif %}</td>
                            <td>{{ item.bcs.nama }}</td>
                            <td>{{ item.bcs.ward }}</td>
                            <td>{{ item.laterality|default:"" }} {{ item.exam }}</td>
                            <td class="text-center align-middle">
                                <span class="align-middle kt-switch kt-switch--icon kt-switch--sm kt-switch--success bootstrap-s"
                                      tabindex="0" data-toggle='tooltip' data-placement='top' title='Merge di PACS'>
                            <label class="mt-3">
                                <input id="merged" type="checkbox" {% if item.merged %}checked{% endif %}
                                       name="merged" hx-post="{% url 'bcs:bcs-merge' item.pk %}" hx-swap="outerHTML"
                                       hx-target="this" />
                                <span></span>
                            </label>
                        </span>
                            </td>
                            <td>
                                <div class="btn-group align-middle" role="group" aria-label="Detail Exam">
                                    <button class="btn btn-icon btn-sm rounded btn-outline-hover-info"
                                            hx-get="{% url 'bcs:bcs-edit' item.bcs.pk %}" hx-target="#bcs-full"
                                            hx-swap="outerHTML" hx-push-url="true"><i class="fa fa-edit text-danger"
                                                                                      aria-hidden="true"></i>
                                    </button>
                                    <button class="btn btn-icon btn-sm rounded btn-outline-hover-info"
                                            hx-get="{{ item.get_absolute_url }}" hx-target="#exam-dialog">
                                        <i class="fa fa-eye text-primary"></i>
                                    </button>
                                    <button class="btn btn-icon btn-sm rounded btn-outline-hover-info"
                                            hx-get="{{ item.get_komen_url }}" hx-target="#exam-dialog">
                                        <i class="fa fa-comment-alt {% if item.dcatatan %}text-warning{% else %}text-secondary{% endif %}"></i>
                                    </button>
                                </div>

                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
                <div id="indicator" class="htmx-indicator p-3 text-center">Dalam Proses.. <span
                    class="kt-spinner kt-spinner-md kt-spinner--success"></span></div>

                {% if page_obj.has_other_pages %}
                    <nav hx-target="#senarai-bcs" hx-push-url="true" hx-indicator=".htmx-indicator">
                        <ul class="pagination justify-content-center">
                            {% if page_obj.has_previous %}
                                <li class="page-item">
                                    <a class="page-link" hx-get="?{{ param }}&page={{ page_obj.previous_page_number }}" href="?{{ param }}&page={{ page_obj.previous_page_number }}"
                                       aria-label="Previous">
                                        <span aria-hidden="true">&laquo;</span>
                                    </a>
                                </li>
                            {% else %}
                                <li class="page-item disabled">
                                    <span class="page-link" aria-hidden="true">&laquo;</span>
                                </li>
                            {% endif %}

                            {% for p in page_obj.paginator.page_range %}
                                {% if page_obj.number == p %}
                                    <li class="page-item"><a class="page-link" style="color: red;" href="#">{{ p }}</a>
                                    </li>
                                {% else %}
                                    <li class="page-item"><a class="page-link" hx-get="?{{ param }}&page={{ p }}" href="?{{ param }}&page={{ p }}">{{ p }}</a></li>
                                {% endif %}
                            {% endfor %}

                            {% if page_obj.has_next %}
                                <li class="page-item">
                                    <a class="page-link" hx-get="?{{ param }}&page={{ page_obj.next_page_number }}" href="?{{ param }}&page={{ page_obj.next_page_number }}" aria-label="Next">
                                        <span aria-hidden="true">&raquo;</span>
                                    </a>
                                </li>
                            {% else %}
                                <li class="page-item disabled">
                                    <span class="page-link" aria-hidden="true">&raquo;</span>
                                </li>
                            {% endif %}
                        </ul>
                    </nav>
                {% endif %}

            </div>
        </div>


        <div class="modal fade" tabindex="-1" id="modal-exam">
            <div id="exam-dialog" class="modal-dialog modal-dialog-scrollable"></div>
        </div>


        {% block scripts %}
        <script>
            $(document).ready(function () {
                $('#merge').select2();
                $('.modaliti').select2({
                    allowClear: true,
                    ajax: {
                        url: '/bcs/api/modaliti',
                        dataType: 'json'
                    }
                });
                $('select').on('select2:select', function (e) {
                    htmx.trigger('#filterlist', 'change');
                });
                $('.tarikh-filter').flatpickr({
                    maxDate: "today",
                    locale: 'ms',
                    dateFormat: 'd/m/Y',
    
                });
    
    
            });
    
        </script>
    {% endblock scripts %}